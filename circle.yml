machine:
  node:
    version: "8.9.0"

dependencies:
  cache_directories:
    - node_modules
    - ~/.electron
    - ~/.cache/yarn

  pre:
    - sudo apt-get update; sudo apt-get install snapcraft
    - npm install -g yarn

  override:
    - yarn install --force

test:
  override:
    - yarn run lint
    - yarn run test

deployment:
  release:
    branch: master
    commands:
      - yarn run dist